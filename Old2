<!doctype html>
<html lang="it">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Capodanno a Madrid - Hub Viaggio</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&amp;display=swap" rel="stylesheet">
  <style>
        body {
            box-sizing: border-box;
            font-family: 'Inter', sans-serif;
        }
        
        .card-minimal {
            background: white;
            border: 1px solid #e5e7eb;
            transition: all 0.2s ease;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }
        
        .card-minimal:hover {
            transform: translateY(-1px);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
            border-color: #d1d5db;
        }
        
        .section-title {
            color: #374151;
        }
        
        .text-muted {
            color: #6b7280;
        }
    </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
  <script src="/_sdk/element_sdk.js" type="text/javascript"></script>
 </head>
 <body class="min-h-full" style="background: linear-gradient(to bottom, #f9fafb, #f3f4f6, #e5e7eb);"><!-- Header con immagine -->
  <div class="w-full mb-4">
   <div class="relative h-48 md:h-64 overflow-hidden"><img src="https://c.pxhere.com/photos/ee/a5/sky_palace_glass_architecture_ceiling_museum_ceilings_real_estate-1117682.jpg!d" alt="Madrid Capodanno" class="w-full h-full object-cover" onerror="this.src=''; this.alt='Immagine non disponibile'; this.style.display='none';">
    <div class="absolute inset-0 bg-gradient-to-t from-black/70 to-black/20 flex items-end justify-center pb-6">
     <div class="text-center text-white">
      <h1 class="text-xl md:text-2xl font-bold mb-1 uppercase tracking-wide">CAPODANNO A MADRID ğŸ‰</h1>
      <p class="text-xs opacity-90 uppercase tracking-wide">30 DICEMBRE - 1 GENNAIO 2025</p>
     </div>
    </div>
   </div>
  </div>
  <div class="container mx-auto px-4 py-4"><!-- Countdown -->
   <div class="max-w-md mx-auto mb-6">
    <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-4">
     <p class="text-sm text-center text-gray-700 mb-3 font-medium">Partenza tra:</p>
     <div class="flex justify-center space-x-3">
      <div class="text-center">
       <div id="days" class="text-2xl font-bold text-gray-900">
        00
       </div>
       <div class="text-xs text-gray-600 uppercase tracking-wide">
        Giorni
       </div>
      </div>
      <div class="text-center">
       <div id="hours" class="text-2xl font-bold text-gray-900">
        00
       </div>
       <div class="text-xs text-gray-600 uppercase tracking-wide">
        Ore
       </div>
      </div>
      <div class="text-center">
       <div id="minutes" class="text-2xl font-bold text-gray-900">
        00
       </div>
       <div class="text-xs text-gray-600 uppercase tracking-wide">
        Min
       </div>
      </div>
      <div class="text-center">
       <div id="seconds" class="text-2xl font-bold text-gray-900">
        00
       </div>
       <div class="text-xs text-gray-600 uppercase tracking-wide">
        Sec
       </div>
      </div>
     </div>
    </div>
   </div><!-- Main Grid -->
   <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3 max-w-4xl mx-auto mb-6"><!-- Itinerario -->
    <div class="card-minimal rounded-lg p-4 cursor-pointer" onclick="openSection('itinerario')">
     <div class="text-center flex flex-col items-center justify-center h-full">
      <div class="text-3xl mb-2">
       ğŸ—ºï¸
      </div>
      <h3 class="text-sm font-medium text-gray-700">ITINERARIO</h3>
     </div>
    </div><!-- Cosa Portare -->
    <div class="card-minimal rounded-lg p-4 cursor-pointer" onclick="openSection('cosa-portare')">
     <div class="text-center flex flex-col items-center justify-center h-full">
      <div class="text-3xl mb-2">
       ğŸ’
      </div>
      <h3 class="text-sm font-medium text-gray-700">COSA PORTARE</h3>
     </div>
    </div><!-- Spese -->
    <div class="card-minimal rounded-lg p-4 cursor-pointer" onclick="openSection('spese')">
     <div class="text-center flex flex-col items-center justify-center h-full">
      <div class="text-3xl mb-2">
       ğŸ’°
      </div>
      <h3 class="text-sm font-medium text-gray-700">SPESE</h3>
     </div>
    </div><!-- Foto -->
    <div class="card-minimal rounded-lg p-4 cursor-pointer" onclick="openSection('foto')">
     <div class="text-center flex flex-col items-center justify-center h-full">
      <div class="text-3xl mb-2">
       ğŸ“¸
      </div>
      <h3 class="text-sm font-medium text-gray-700">FOTO</h3>
     </div>
    </div><!-- Playlist -->
    <div class="card-minimal rounded-lg p-4 cursor-pointer" onclick="openSection('playlist')">
     <div class="text-center flex flex-col items-center justify-center h-full">
      <div class="text-3xl mb-2">
       ğŸµ
      </div>
      <h3 class="text-sm font-medium text-gray-700">PLAYLIST</h3>
     </div>
    </div><!-- Guida Madrid -->
    <div class="card-minimal rounded-lg p-4 cursor-pointer" onclick="openSection('guida')">
     <div class="text-center flex flex-col items-center justify-center h-full">
      <div class="text-3xl mb-2">
       ğŸ“–
      </div>
      <h3 class="text-sm font-medium text-gray-700">GUIDA MADRID</h3>
     </div>
    </div><!-- Info Utili -->
    <div class="card-minimal rounded-lg p-4 cursor-pointer" onclick="openSection('info-utili')">
     <div class="text-center flex flex-col items-center justify-center h-full">
      <div class="text-3xl mb-2">
       ğŸ“‹
      </div>
      <h3 class="text-sm font-medium text-gray-700">INFO UTILI</h3>
     </div>
    </div><!-- FAQ -->
    <div class="card-minimal rounded-lg p-4 cursor-pointer" onclick="openSection('faq')">
     <div class="text-center flex flex-col items-center justify-center h-full">
      <div class="text-3xl mb-2">
       â“
      </div>
      <h3 class="text-sm font-medium text-gray-700">FAQ</h3>
     </div>
    </div><!-- Emergency Kit -->
    <div class="card-minimal rounded-lg p-4 cursor-pointer" onclick="openSection('emergency')">
     <div class="text-center flex flex-col items-center justify-center h-full">
      <div class="text-3xl mb-2">
       ğŸš¨
      </div>
      <h3 class="text-sm font-medium text-gray-700">EMERGENCY KIT</h3>
     </div>
    </div><!-- Info WeRoad -->
    <div class="card-minimal rounded-lg p-4 cursor-pointer" onclick="openSection('weroad')">
     <div class="text-center flex flex-col items-center justify-center h-full">
      <div class="text-3xl mb-2">
       ğŸŒ
      </div>
      <h3 class="text-sm font-medium text-gray-700">INFO WEROAD</h3>
     </div>
    </div>
   </div><!-- Meteo -->
   <div class="mb-6">
    <div class="card-minimal rounded-lg overflow-hidden max-w-4xl mx-auto">
     <div class="bg-gray-50 p-3 border-b border-gray-200">
      <div class="flex items-center justify-between">
       <div class="flex items-center"><span class="text-lg mr-2">ğŸŒ¤ï¸</span>
        <h3 class="text-sm font-medium text-gray-700">Meteo Weekend Madrid</h3>
       </div><a href="https://weather.com/weather/tenday/l/Madrid+Spain" target="_blank" rel="noopener noreferrer" class="text-xs bg-blue-600 text-white px-3 py-1 rounded hover:bg-blue-700 transition-colors"> Previsioni Dettagliate </a>
      </div>
     </div>
     <div class="p-4">
      <div id="weather-loading" class="text-center py-8">
       <div class="inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"></div>
       <p class="text-sm text-gray-600 mt-2">Caricamento previsioni meteo...</p>
      </div>
      <div id="weather-content" class="hidden">
       <div class="grid grid-cols-3 gap-3 mb-4" id="weather-days"></div>
       <div class="bg-blue-50 p-3 rounded-lg">
        <h4 class="font-medium text-gray-800 mb-2 text-sm">ğŸ§¥ Consigli Abbigliamento</h4>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-2 text-xs text-gray-700" id="weather-advice">
         <div>
          â„ï¸ <strong>Giorno:</strong> Cappotto pesante, maglione (5-10Â°C)
         </div>
         <div>
          ğŸŒ™ <strong>Sera:</strong> Cappotto + sciarpa + guanti (0-5Â°C)
         </div>
         <div>
          ğŸ‘Ÿ <strong>Scarpe:</strong> Comode e chiuse, NO sandali!
         </div>
        </div>
       </div>
      </div>
      <div id="weather-error" class="hidden text-center py-4">
       <p class="text-sm text-gray-600 mb-3">âš ï¸ Impossibile caricare i dati meteo</p>
       <div class="grid grid-cols-3 gap-3 mb-4">
        <div class="bg-white p-3 rounded-lg text-center border border-gray-200">
         <p class="text-xs text-gray-500 mb-1">Lun 30 Dic</p>
         <div class="text-3xl mb-1">
          ğŸŒ¤ï¸
         </div>
         <p class="text-lg font-medium text-gray-800">10Â°C</p>
         <p class="text-xs text-gray-500">Soleggiato</p>
        </div>
        <div class="bg-white p-3 rounded-lg text-center border border-gray-200">
         <p class="text-xs text-gray-500 mb-1">Mar 31 Dic</p>
         <div class="text-3xl mb-1">
          â„ï¸
         </div>
         <p class="text-lg font-medium text-gray-800">8Â°C</p>
         <p class="text-xs text-gray-500">Freddo</p>
        </div>
        <div class="bg-white p-3 rounded-lg text-center border border-gray-200">
         <p class="text-xs text-gray-500 mb-1">Mer 1 Gen</p>
         <div class="text-3xl mb-1">
          â˜€ï¸
         </div>
         <p class="text-lg font-medium text-gray-800">9Â°C</p>
         <p class="text-xs text-gray-500">Sereno</p>
        </div>
       </div>
      </div>
     </div>
    </div>
   </div><!-- Mappa Google Maps -->
   <div class="mb-6">
    <div class="card-minimal rounded-lg overflow-hidden max-w-4xl mx-auto">
     <div class="bg-gray-50 p-3 border-b border-gray-200">
      <div class="flex items-center justify-between">
       <div class="flex items-center"><span class="text-lg mr-2">ğŸ—ºï¸</span>
        <h3 class="text-sm font-medium text-gray-700">Mappa Madrid</h3>
       </div><a href="https://www.google.com/maps/place/Madrid,+Spagna/@40.4167047,-3.7035825,12z" target="_blank" rel="noopener noreferrer" class="text-xs bg-gray-700 text-white px-3 py-1 rounded hover:bg-gray-800 transition-colors"> Apri in Google Maps </a>
      </div>
     </div>
     <div class="h-64 md:h-80"><iframe src="https://www.google.com/maps/d/u/0/embed?mid=1Qc0qsiDEZ_x8tjgkAvikBMiO-A1NOss&amp;ehbc=2E312F" width="100%" height="100%" style="border:0;" allowfullscreen loading="lazy"> </iframe>
     </div>
    </div>
   </div><!-- Link Utili -->
   <div class="mb-6">
    <div class="grid grid-cols-1 md:grid-cols-3 gap-3 max-w-4xl mx-auto"><a href="https://www.esmadrid.com" target="_blank" rel="noopener noreferrer" class="card-minimal rounded-lg p-4">
      <div class="flex items-center"><span class="text-2xl mr-3">ğŸ›ï¸</span>
       <div>
        <h4 class="font-medium text-gray-700 text-sm">ESMADRID</h4>
        <p class="text-xs text-gray-500">Turismo ufficiale</p>
       </div>
      </div></a> <a href="https://www.weroad.it/viaggi/madrid-weekend-weroadx" target="_blank" rel="noopener noreferrer" class="card-minimal rounded-lg p-4">
      <div class="flex items-center"><span class="text-2xl mr-3">ğŸŒ</span>
       <div>
        <h4 class="font-medium text-gray-700 text-sm">WEROAD</h4>
        <p class="text-xs text-gray-500">Il nostro tour</p>
       </div>
      </div></a> <a href="https://consmadrid.esteri.it" target="_blank" rel="noopener noreferrer" class="card-minimal rounded-lg p-4">
      <div class="flex items-center"><span class="text-2xl mr-3">ğŸ‡®ğŸ‡¹</span>
       <div>
        <h4 class="font-medium text-gray-700 text-sm">CONSOLATO</h4>
        <p class="text-xs text-gray-500">Consolato Italia</p>
       </div>
      </div></a>
    </div>
   </div>
  </div><!-- Modal per le sezioni -->
  <div id="modal" class="fixed inset-0 bg-black/50 hidden items-center justify-center z-50 p-4">
   <div class="card-minimal rounded-lg max-w-2xl w-full max-h-[90%] overflow-hidden">
    <div class="p-4">
     <div class="flex justify-between items-center mb-4">
      <h2 id="modal-title" class="text-lg font-semibold text-gray-900"></h2><button onclick="closeModal()" class="text-gray-400 hover:text-gray-600 text-2xl">Ã—</button>
     </div>
     <div id="modal-content" class="text-gray-600 overflow-y-auto max-h-[70vh] text-sm"><!-- Il contenuto verrÃ  inserito qui -->
     </div>
    </div>
   </div>
  </div>
  <script>
        // Weather API
        async function loadWeather() {
            try {
                const response = await fetch('https://api.open-meteo.com/v1/forecast?latitude=40.4168&longitude=-3.7038&daily=temperature_2m_max,temperature_2m_min,weathercode&timezone=Europe/Madrid&start_date=2024-12-30&end_date=2025-01-01');
                const data = await response.json();
                
                const weatherIcons = {
                    0: 'â˜€ï¸', 1: 'ğŸŒ¤ï¸', 2: 'ï¿½ï¿½ï¿½', 3: 'â˜ï¸',
                    45: 'ğŸŒ«ï¸', 48: 'ğŸŒ«ï¸',
                    51: 'ğŸŒ¦ï¸', 53: 'ğŸŒ¦ï¸', 55: 'ğŸŒ§ï¸',
                    61: 'ğŸŒ§ï¸', 63: 'ğŸŒ§ï¸', 65: 'ğŸŒ§ï¸',
                    71: 'ğŸŒ¨ï¸', 73: 'ğŸŒ¨ï¸', 75: 'ğŸŒ¨ï¸',
                    80: 'ğŸŒ¦ï¸', 81: 'ğŸŒ§ï¸', 82: 'â›ˆï¸',
                    95: 'â›ˆï¸', 96: 'â›ˆï¸', 99: 'â›ˆï¸'
                };
                
                const weatherDesc = {
                    0: 'Sereno', 1: 'Soleggiato', 2: 'Parzialmente nuvoloso', 3: 'Nuvoloso',
                    45: 'Nebbioso', 48: 'Nebbioso',
                    51: 'Pioggia leggera', 53: 'Pioggia moderata', 55: 'Pioggia intensa',
                    61: 'Pioggia leggera', 63: 'Pioggia', 65: 'Pioggia forte',
                    71: 'Neve leggera', 73: 'Neve', 75: 'Neve intensa',
                    80: 'Rovesci', 81: 'Rovesci forti', 82: 'Temporali',
                    95: 'Temporale', 96: 'Temporale forte', 99: 'Temporale intenso'
                };
                
                const dates = ['Lun 30 Dic', 'Mar 31 Dic', 'Mer 1 Gen'];
                const daysHtml = data.daily.weathercode.map((code, i) => {
                    const maxTemp = Math.round(data.daily.temperature_2m_max[i]);
                    const minTemp = Math.round(data.daily.temperature_2m_min[i]);
                    const avgTemp = Math.round((maxTemp + minTemp) / 2);
                    return `
                        <div class="bg-white p-3 rounded-lg text-center border border-gray-200">
                            <p class="text-xs text-gray-500 mb-1">${dates[i]}</p>
                            <div class="text-3xl mb-1">${weatherIcons[code] || 'ğŸŒ¤ï¸'}</div>
                            <p class="text-lg font-medium text-gray-800">${avgTemp}Â°C</p>
                            <p class="text-xs text-gray-500">${weatherDesc[code] || 'Variabile'}</p>
                        </div>
                    `;
                }).join('');
                
                document.getElementById('weather-days').innerHTML = daysHtml;
                document.getElementById('weather-loading').classList.add('hidden');
                document.getElementById('weather-content').classList.remove('hidden');
            } catch (error) {
                console.error('Errore caricamento meteo:', error);
                document.getElementById('weather-loading').classList.add('hidden');
                document.getElementById('weather-error').classList.remove('hidden');
            }
        }

        // Countdown Timer
        function updateCountdown() {
            const targetDate = new Date('2025-12-30T15:00:00+01:00').getTime();
            const now = new Date().getTime();
            const distance = targetDate - now;

            if (distance > 0) {
                const days = Math.floor(distance / (1000 * 60 * 60 * 24));
                const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((distance % (1000 * 60)) / 1000);

                document.getElementById('days').textContent = days.toString().padStart(2, '0');
                document.getElementById('hours').textContent = hours.toString().padStart(2, '0');
                document.getElementById('minutes').textContent = minutes.toString().padStart(2, '0');
                document.getElementById('seconds').textContent = seconds.toString().padStart(2, '0');
            } else {
                document.getElementById('days').textContent = '00';
                document.getElementById('hours').textContent = '00';
                document.getElementById('minutes').textContent = '00';
                document.getElementById('seconds').textContent = '00';
            }
        }

        updateCountdown();
        setInterval(updateCountdown, 1000);

        // Carica meteo all'avvio
        loadWeather();

        const sections = {
            'itinerario': {
                title: 'ğŸ—ºï¸ Itinerario',
                content: `
                    <div class="space-y-3">
                        <div class="bg-blue-50 border-l-4 border-blue-400 p-3 rounded-lg">
                            <h4 class="font-medium text-gray-800 mb-2">ğŸ“… Programma Madrid Capodanno 2025</h4>
                            <p class="text-sm text-gray-700">Tre giorni indimenticabili nella capitale spagnola! ğŸ‰</p>
                        </div>

                        <div class="bg-white border-l-4 border-orange-400 p-3 rounded-lg">
                            <div class="flex items-center mb-2">
                                <span class="text-2xl mr-2">1ï¸âƒ£</span>
                                <h4 class="font-medium text-gray-800">LunedÃ¬ 30 Dicembre</h4>
                            </div>
                            <div class="space-y-2 text-sm text-gray-700">
                                <div class="flex items-start">
                                    <span class="mr-2">ğŸ¨</span>
                                    <div>
                                        <strong>Check-in e primo incontro</strong>
                                        <p class="text-xs text-gray-600">Ci conosciamo in hotel e inizia l'avventura!</p>
                                    </div>
                                </div>
                                <div class="flex items-start">
                                    <span class="mr-2">ğŸš¶</span>
                                    <div>
                                        <strong>Giro del centro di Madrid</strong>
                                        <p class="text-xs text-gray-600">Plaza Mayor, Puerta del Sol, Palazzo Reale e dintorni</p>
                                    </div>
                                </div>
                                <div class="flex items-start">
                                    <span class="mr-2">ğŸ¥˜</span>
                                    <div>
                                        <strong>Paella per cena</strong>
                                        <p class="text-xs text-gray-600">Il piatto spagnolo piÃ¹ iconico tutti insieme!</p>
                                    </div>
                                </div>
                                <div class="flex items-start">
                                    <span class="mr-2">ğŸ‰</span>
                                    <div>
                                        <strong>Vita notturna madrilena</strong>
                                        <p class="text-xs text-gray-600">Scopriamo i locali e l'energia della notte di Madrid</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="bg-white border-l-4 border-red-400 p-3 rounded-lg">
               
